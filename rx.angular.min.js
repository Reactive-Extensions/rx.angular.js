(function(a){function b(a){return"[object Function]"===k.call(a)}function c(){}var d={"boolean":!1,"function":!0,object:!0,number:!1,string:!1,undefined:!1},e=d[typeof window]&&window||this,f=d[typeof exports]&&exports&&!exports.nodeType&&exports,g=d[typeof module]&&module&&!module.nodeType&&module,h=(g&&g.exports===f&&f,d[typeof global]&&global);!h||h.global!==h&&h.window!==h||(e=h);var i=Rx.Observable,j=i.prototype,k={}.toString,l=angular.module("rx",[]);l.factory("rx",function(a){if(!a.Rx)throw new Error("Rx is not defined!");return a.Rx}),l.factory("observeOnScope",function(a){return function(b,c,d){return a.Observable.create(function(a){function e(b,c){a.onNext({oldValue:c,newValue:b})}return b.$watch(c,e,d)})}}),j.safeApply=function(a,d){return d=b(d)?d:c,this.doAction(function(b){a.$$phase||a.$root.$$phase?d(b):a.$apply(function(){d(b)})})},l.config(["$provide",function(b){b.decorator("$rootScope",["$delegate",function(b){return Object.defineProperty(b.constructor.prototype,"$toObservable",{value:function(a,b){var c=this;return Rx.Observable.create(function(d){function e(a,b){d.onNext({oldValue:b,newValue:a})}var f=c.$watch(a,e,b),g=Rx.Disposable.create(f);return c.$on("$destroy",function(){g.dispose()}),g})},enumerable:!1}),Object.defineProperty(b.constructor.prototype,"$createObservableFunction",{value:function(b,c){var d=this;return Rx.Observable.create(function(e){return d[b]=function(){a!==c?e.onNext(c.apply(this,arguments)):1===arguments.length?e.onNext(arguments[0]):e.onNext(arguments)},function(){delete d[b]}})},enumerable:!1}),b}])}])}).call(this);